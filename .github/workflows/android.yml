[app]
# Basic app info
title = PhotoUploader
package.name = photouploader
package.domain = org.example
source.dir = .
source.include_exts = py,png,jpg,jpeg,kv,atlas,json,txt
version = 1.0

# Python requirements - updated versions and organization
requirements = 
    python3,
    kivy==2.3.0,  # Updated to latest stable
    plyer==2.1.0,
    google-api-python-client==2.117.0,
    google-auth==2.27.0,
    google-auth-oauthlib==1.2.0,
    google-auth-httplib2==0.1.1,
    certifi,
    pillow==10.2.0,
    requests==2.31.0

# App configuration
orientation = portrait

# Permissions - updated for Android 12+ compatibility
android.permissions = 
    CAMERA,
    INTERNET,
    ACCESS_NETWORK_STATE,
    ACCESS_WIFI_STATE,
    WAKE_LOCK,
    VIBRATE

# Add service account credentials - use secrets instead
# android.add_src = service_account.json  # REMOVED - use GitHub Secrets

# Android API configuration - match GitHub Actions
android.api = 34
android.minapi = 21
android.ndk = 25.2.9519653  # Match workflow version
android.arch = arm64-v8a  # Focus on 64-bit for better performance
android.sdk = 34

# Modern Android support
android.useandroidx = True
android.enable_androidx_workaround = True

# Gradle dependencies - updated versions
android.gradle_dependencies = 
    com.google.android.gms:play-services-auth:21.0.0,
    androidx.core:core-ktx:1.12.0,
    androidx.appcompat:appcompat:1.6.1

# Additional Android configuration
android.allow_backup = True
android.logcat_filters = *:S python:D

# Build optimization - changed to apk for GitHub Actions
android.release_artifact = apk
android.debug.sign = 1

# Application metadata
android.meta_data = 
    com.google.android.gms.version=@integer/google_play_services_version

# Build optimization
android.gradle.option = 
    android.useAndroidX=true,
    android.enableJetifier=true

# New security config for Android 12+
android.application_args = --use-sdk-versions 34
android.manifest_application_arguments = android:appComponentFactory

[buildozer]
log_level = 2
warn_on_root = 1
build_dir = ./.buildozer
bin_dir = ./bin
